#!/bin/bash

oc exec -ti $(oc get pod -l app=my-connect-cluster-connect -o=jsonpath='{.items[0].metadata.name}') -- curl -X POST -H "Content-Type: application/json" --data '{"name": "FluentdSourceConnector", "config": {"connector.class":"org.fluentd.kafka.FluentdSourceConnector", "tasks.max":"1", "fluentd.connect":"localhost:24224", "fluentd.port":"24224", "fluentd.bind":"0.0.0.0", "fluentd.worker.pool.size":"1", "fluentd.counter.enabled":"true","fluentd.schemas.enable":"false"}}' http://localhost:8083/connectors

oc exec -ti $(oc get pod -l app=my-connect-cluster-connect -o=jsonpath='{.items[0].metadata.name}') -- curl -X POST -H "Content-Type: application/json" --data '{"name": "FluentdSinkConnector", "config": {"connector.class":"org.fluentd.kafka.FluentdSinkConnector", "tasks.max":"1", "fluentd.connect":"localhost:24225", "fluentd.port":"24225", "fluentd.bind":"0.0.0.0", "fluentd.worker.pool.size":"1", "fluentd.counter.enabled":"true","fluentd.schemas.enable":"false", "topics":"output_tag"}}' http://localhost:8083/connectors
